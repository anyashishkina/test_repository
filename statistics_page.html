<!DOCTYPE html>
<html>
<head>
    <title>Heatmap</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <style>
        .center {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }
    </style>
</head>
<body>
    <h1>Статистика</h1>
    <div class="center">
        <div id="heatmap"></div>
    </div>

    <script>
        // Получение данных из Flask
<!--        var data = {{ matrix|tojson|safe }};-->
        let data = window.Telegram.WebApp.initDataUnsafe;
        // Создание тепловой карты с использованием Plotly
        var layout = {
            title: 'Результаты тестов',
            xaxis: {
                title: 'Состояние клиента',
                tickmode: 'array',
                tickvals: [0, 1, 2, 3],
                ticktext: ['Лояльный', 'Новый', 'Негативный', 'Сомневающийся']
            },
            yaxis: {
                title: 'Способ общения',
                tickmode: 'array',
                tickangle: 45, // угол наклона подписей оси Y
                tickvals: [0, 1, 2],
                ticktext: ['Телефон', 'Встреча', 'Переписка']
            },
            autosize: false, // отключение автоматического масштабирования
            width: 1000,      // ширина в пикселях
            height: 500      // высота в пикселях
        };

        var heatmapData = [
            {
                z: data,
                type: 'heatmap'
            }
        ];

        Plotly.newPlot('heatmap', heatmapData, layout);
    </script>
</body>
</html>
